diff --git a/llamia_v3_2/nodes/planner.py b/llamia_v3_2/nodes/planner.py
index 91441f7d1db0e7f6d53616c864258a0c47933935..ef71bc9cc1b0348f7b90feba2ac48825d4f27269 100644
--- a/llamia_v3_2/nodes/planner.py
+++ b/llamia_v3_2/nodes/planner.py
@@ -123,66 +123,65 @@ def _try_parse_json_object(raw: str) -> dict[str, Any] | None:
 
 
 def _retry_strict_json(messages: list[dict[str, str]], model_cfg) -> str:
     retry_msgs = list(messages)
     retry_msgs.append(
         {
             "role": "system",
             "content": (
                 "ERROR: Your last response was not valid JSON.\n"
                 "PRODUCE ONLY JSON with a 'plan' field containing an array of steps.\n"
                 "NO TEXT BEFORE OR AFTER JSON.\n"
                 "Format: {\"plan\": [{\"id\": 1, \"description\": \"...\"}]}\n"
                 "START YOUR RESPONSE WITH { and END WITH }"
             ),
             "node": NODE_NAME,
         }
     )
     return chat_completion(messages=retry_msgs, model_cfg=model_cfg)
 
 
 
 def _analyze_goal_complexity(goal: str) -> str:
     """Analyze the goal and return complexity level using an LLM."""
     from llamia_v3_2.llm_client import chat_completion, DEFAULT_CONFIG
     
-    prompt = (
-        "You are an expert at analyzing task complexity. ",
+    prompt = " ".join([
+        "You are an expert at analyzing task complexity.",
         "Classify the following task into one of these categories: simple, complex, development.",
         "Simple: tasks that can be completed in 1-2 steps with minimal dependencies.",
         "Complex: tasks requiring multiple steps, coordination, or research.",
         "Development: tasks that involve writing or modifying code, including testing.",
         f"Task: {goal}",
-        "Reason step by step, then output only the category (simple, complex, development)."
-    )
+        "Reason step by step, then output only the category (simple, complex, development).",
+    ])
     
     response = chat_completion(
         messages=[{"role": "user", "content": prompt}],
         model_cfg=DEFAULT_CONFIG.model_for("planner"),
     ).strip().lower()
     
-    pass
     if response not in ['simple', 'complex', 'development']:
         return 'complex'
     return response
 
 
 
 def _enhance_plan_with_context(plan_steps: list[dict], goal: str, research_notes: str = "") -> list[PlanStep]:
     """Enhance the plan with additional context and validation."""
     enhanced_steps = []
     
     for i, step in enumerate(plan_steps):
         if not isinstance(step, dict):
             continue
             
         desc = str(step.get("description", "")).strip()
         if not desc:
             continue
             
         sid = int(step.get("id", i + 1))
         
         # Create PlanStep with only the original expected fields
         enhanced_steps.append(PlanStep(
             id=sid, 
             description=desc, 
             status="pending"
